# 压力测试 - JMeter

## 前言
- 压力测试是每一个 Web 应用程序上线之前都需要做的一个测试，它可以帮助我们发现系统中的瓶颈问题，减少发布到生产环境后出现的几率；
预估系统的承载能力，使我们能根据其做出一些应对措施。

## JMeter
- Apache JMeter 是 Apache 组织开发的基于 Java 的压力测试工具。用于对软件做压力测试，它最初被设计用于 Web 应用测试，但后来拓展到其他测试领域。
它可以用于测试静态和动态资源，例如静态文件、Java 小服务程序、CGI 脚本、Java 对象、数据库、FTP 服务器等等。
- JMeter 可以用于对服务器、网络或对象模拟巨大的负载，来自不同压力类别下测试它们的强度和分析整体性能。另外，JMeter能够对应用程序做功能/回归测试，通过创建带有断言的脚本来验证你的程序返回了你期待的结果，为了最大限度的灵活性，JMeter允许使用正则表达式创建断言。
- 


# 接口测试部分

## 线程组
- 线程组：主要的业务的代码
- setUp 线程组：测试之前的需要做的所有的操作
- tearDown 线程组：测试之后需要的操作

- 比如，测试之前，去数据库里面添加一些准备数据（setUp 线程组），所有的用例测完后，数据库产生了大量的垃圾数据，需要恢复数据（tearDown 线程组）

## HTTP 请求

## 变量
- 在测试计划里面添加变量，引用时用${}
- 内容编码：utf8

## 上下游传参 
- 查看结果树 - JSON Path Tester - JSON Path Expression($["variable"])
- HTTP请求 - 添加 - 后置处理器 - JSON 提取器
- JSON 提取器
- Names of created variables 自定义名字（后续会用到）
- 把$["variable"] 放到 JSON 提取器的 JSON Path expressions
- Match No. 默认用 1 便可以
- HTTP 请求
- token 替换为${自定义名字}

## 内置函数
- 工具 - 函数助手对话框 
- 函数助手对话框
- 可选（RandomString）以其为例
- 随机字符串长度
- 字符库
- 生成
- 复制函数字符串至 HTTP 请求的消息体 JSON 对应处

## 正则表达式
- 查看结果树 - RegExp Tester（筛选？） - Regular expression：`“字段”:(.+?),`
- HTTP 请求 - 添加 - 正则表达式提取器
- 正则表达式提取器
- 引用名称：自定义
- 正则表达式：`“字段”:(.+?),`
- 模版：$1$
- 匹配数字：先前数据的下标
- HTTP 请求
- 字段替换为 ${自定义}

## 数据驱动 CSV 文件配置（批量造数据）
- csv 将表头名字填写到消息体${表头}
- 上传 csv
- 线程组 - 添加 - 配置元件 - CSV Data Set Config
- CSV Data Set Config
- 文件
- 变量名称（直接复制表头）
- 文件编码
- 首行忽略
- 线程组改一下线程

## 断言（服务器返回数据不对警示）
- 可添加多个响应断言，规则可叠加
- HTTP 请求 - 添加 - 断言 - 响应断言
- 响应断言
### 相应文本
- 模式匹配规则：字符串
- 测试模式：添加一个字段：`"字段"`

### 响应代码
- 模式匹配规则：相等
- 测试模式：状态码
- HTTP 请求 - 添加 - 断言 - JSON 断言
- JSON 断言
- Assert JSON Path exists：`$["字段"]`
